model Tenancy {
  id        String    @id @default(uuid())
  spaceId   String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @db.Timestamptz(6)
  removedAt DateTime? @db.Timestamptz(6)
  space     Space     @relation(fields: [spaceId], references: [id])
  tenants   Tenant[]
}

model Profile {
  id        String    @id @default(uuid())
  nickname  String
  userId    String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @db.Timestamptz(6)
  removedAt DateTime? @db.Timestamptz(6)
  user      User      @relation(fields: [userId], references: [id])
}

model User {
  id        String    @id @default(uuid())
  email     String    @unique
  name      String    @unique
  phone     String    @unique
  password  String
  updatedAt DateTime? @updatedAt @db.Timestamptz(6)
  createdAt DateTime  @default(now()) @db.Timestamptz(6)
  removedAt DateTime? @db.Timestamptz(6)
  profiles  Profile?
  tenants   Tenant[]
}

model Tenant {
  id        String      @id @default(uuid())
  userId    String      @unique
  roleId    String
  createdAt DateTime    @default(now())
  updatedAt DateTime?   @updatedAt @db.Timestamptz(6)
  active    Boolean     @default(false)
  removedAt DateTime?   @db.Timestamptz(6)
  tenancyId String
  type      TenantTypes @default(PHYSICAL)
  role      Role        @relation(fields: [roleId], references: [id])
  tenancy   Tenancy     @relation(fields: [tenancyId], references: [id])
  user      User        @relation(fields: [userId], references: [id])
}

model Space {
  id        String    @id @default(uuid())
  name      String    @unique
  createdAt DateTime  @default(now()) @db.Timestamptz(6)
  updatedAt DateTime? @updatedAt @db.Timestamptz(6)
  removedAt DateTime? @db.Timestamptz(6)
  groups    Group[]
  tenancies Tenancy?
}

enum TenantTypes {
  PHYSICAL
  ABSTRACT
}
